name: Ping Pranay voice bot

on:
  schedule:
    - cron: "*/15 * * * *"  
  workflow_dispatch:        

jobs:
  ping-app:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Streamlit App
        run: |
          echo "🔄 Pinging Streamlit app..."
          APP_URL="https://your-streamlit-app.streamlit.app"  # 🔁 Replace with your actual URL

          # Follow redirects (-L), suppress output (-s), discard body (-o /dev/null), output status (%{http_code})
          STATUS=$(curl -L -s -o /dev/null -w "%{http_code}" $APP_URL)
          echo "🌐 Received HTTP Status: $STATUS"

          if [ "$STATUS" -ne 200 ]; then
            echo "❌ App is not returning 200 OK. Failing the job."
            exit 1
          else
            echo "✅ App is up and responding with 200 OK!"
          fi
